$(function(){function t(t){this.$ct=t,this.init(),this.bind()}t.prototype.init=function(){this.$preBtn=this.$ct.find(".arrow.pre"),this.$nextBtn=this.$ct.find(".arrow.next"),this.list=this.$ct.find(".pics>li");var t=this.imgWidth=this.$ct.find("img").width(),i=this.listCount=this.list.length;this.$imgCt=this.$ct.find(".pics"),this.pageIndex=0,this.$tipsBtn=this.$ct.find(".tipchoose>li"),this.isAminate=!1,this.$imgCt.css({left:-t}),this.$imgCt.append(this.list.first().clone()),this.$imgCt.prepend(this.list.last().clone()),this.$imgCt.width((i+2)*t)},t.prototype.bind=function(){var t=this;this.$preBtn.on("click",function(){t.playPre(1)}),this.$nextBtn.on("click",function(){t.playNext(1)}),this.$tipsBtn.on("click",function(){var i=this,n=$(i).index();n>t.pageIndex?t.playNext(n-t.pageIndex):n<t.pageIndex&&t.playPre(t.pageIndex-n)})},t.prototype.playPre=function(t){this.len=t;var i=this;i.isAminate||(i.isAminate=!0,this.$imgCt.animate({left:"+="+this.len*this.imgWidth},function(){i.pageIndex-=i.len,i.pageIndex<0&&(i.pageIndex=i.listCount-1,i.$imgCt.css({left:-i.imgWidth*i.listCount})),i.tipsShow(),i.isAminate=!1}))},t.prototype.playNext=function(t){this.len=t;var i=this;i.isAminate||(i.isAminate=!0,i.$imgCt.animate({left:"-="+this.len*this.imgWidth},function(){i.pageIndex+=i.len,i.pageIndex==i.listCount&&(i.pageIndex=0,i.$imgCt.css({left:-i.imgWidth})),i.tipsShow(),i.isAminate=!1}))},t.prototype.tipsShow=function(){var t=this;t.$tipsBtn.removeClass("active").eq(t.pageIndex).addClass("active")};new t($("#carousel"))});
$(function(){$(".gotop").on("click",function(){$(window).scrollTop(0)})});
$(function(){$(".portfolio-wrapper").on("mouseenter","li",function(){$(this).addClass("change").siblings().removeClass("change")}).on("mouseleave","li",function(){$(this).removeClass("change")});var s=$(".tipscroll>li>a"),o=$(".section"),e=s.length-1;$(window).scroll(function(){var a=$(document).scrollTop(),l=e;for(a>200?($(".navscroll").removeClass("hidden").addClass("show"),$(".navbackground").removeClass("show").addClass("hidden")):($(".navscroll").removeClass("show").addClass("hidden"),$(".navbackground").removeClass("hidden").addClass("show"));l>-1;l--)if(a>=o.eq(l).offset().top){s.removeClass("current").eq(l).addClass("current");break}}),s.on("click",function(s){$(window).scrollTop();s.preventDefault(),$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},400)})});
$(function(){function t(){n(function(t){$.each(t,function(t,n){var o=a(n);o.find("img").load(function(){$(".pic").append(o),i(o)})})})}function n(t){$.ajax({url:"http://platform.sina.com.cn/slide/album_tech",dataType:"jsonp",jsonp:"jsoncallback",data:{app_key:"1271687855",num:c,page:o}}).done(function(n){n&&n.status&&"0"===n.status.code?(t(n.data),o++):console.log("get data error")})}function a(t){var n="";return n+='<li><a href="'+t.url+'" class="link">',n+='<img src="'+t.img_url+'" alt="" class="waterimg"></a></li>',$(n)}function i(t){t.each(function(){var t=Math.min.apply(null,l),n=l.indexOf(t);$(this).css({top:l[n],left:$(this).outerWidth(!0)*n,opacity:1}),l[n]+=$(this).outerHeight(!0),$(".pic").height(Math.max.apply(null,l))})}for(var o=1,c=7,e=$(".item").outerWidth(!0),l=[],u=parseInt($(".pic").width()/e),r=0;r<u;r++)l[r]=0;t(),$(window).resize(function(){t()}),$(".loadpicture").on("click",function(){t()})});